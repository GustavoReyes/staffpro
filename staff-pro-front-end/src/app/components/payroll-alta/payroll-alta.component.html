<div class="min-h-screen flex items-center justify-center bg-[#1e2226] px-2">
  <div
    class="w-full max-w-6xl rounded-2xl overflow-hidden shadow-2xl bg-[#23272A] p-6"
  >
    <form
      class="w-full"
      (ngSubmit)="addPayroll()"
      #payrollForm="ngForm"
      autocomplete="off"
    >
      <h2 class="text-2xl font-bold text-white mb-10 text-center">
        Crear Nómina
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-5">
        <!-- DNI Empleado -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Empleado</label>
          <select
            title="Dni"
            name="user_dni"
            [(ngModel)]="payroll.user_dni"
            (change)="onEmployeeChange(); updateTotal()"
            required
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          >
            <option value="" disabled selected>Selecciona empleado</option>
            <option *ngFor="let emp of employees" [value]="emp.dni">
              {{ emp.dni }} - {{ emp.name }}
            </option>
          </select>
        </div>
        <!-- Salario Base -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Salario Base</label>
          <input
            title="Salario"
            type="number"
            name="base_salary"
            [(ngModel)]="payroll.base_salary"
            [readonly]="true"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white opacity-70 cursor-not-allowed"
          />
        </div>
        <!-- Fecha -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Fecha</label>
          <input
            title="Dia de Nómina"
            type="date"
            name="date"
            [(ngModel)]="payroll.date"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- Periodo Inicio -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Periodo Inicio</label>
          <input
            title="period_in"
            type="date"
            name="period_in"
            [(ngModel)]="payroll.period_in"
            (change)="onPeriodChange()"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- Periodo Fin -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Periodo Fin</label>
          <input
            title="period_out"
            type="date"
            name="period_out"
            [(ngModel)]="payroll.period_out"
            (change)="onPeriodChange()"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- Días Trabajados -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Días Trabajados</label>
          <input
            title="Dias Trabajados"
            type="text"
            [value]="
              periodoInvalido
                ? 'Error las Fechas'
                : diasPeriodo > 0
                ? diasPeriodo
                : ''
            "
            readonly
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white opacity-70 cursor-not-allowed"
            [ngClass]="{
              'border-red-600 text-red-400': periodoInvalido,
              'border-green-600 text-green-400':
                !periodoInvalido && diasPeriodo > 0
            }"
          />
        </div>
        <!-- Seguridad Social -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Seguridad Social</label>
          <input
            title="Seguro Social"
            type="number"
            name="social_security"
            [(ngModel)]="payroll.social_security"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- IRPF -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">IRPF</label>
          <input
            title="IRPF"
            type="number"
            name="irpf"
            [(ngModel)]="payroll.irpf"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- Bono 1 -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Bono 1</label>
          <input
            title="Bono"
            type="number"
            name="bonus_1"
            [(ngModel)]="payroll.bonus_1"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- Bono 2 -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Bono 2</label>
          <input
            title="Bono"
            type="number"
            name="bonus_2"
            [(ngModel)]="payroll.bonus_2"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- Bono 3 -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Bono 3</label>
          <input
            title="Bono"
            type="number"
            name="bonus_3"
            [(ngModel)]="payroll.bonus_3"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- Anticipo -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Anticipo</label>
          <input
            title="Anticipo"
            type="number"
            name="advance"
            [(ngModel)]="payroll.advance"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- Deducción 1 -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Deducción 1</label>
          <input
            title="Deducción 1"
            type="number"
            name="deduction_1"
            [(ngModel)]="payroll.deduction_1"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- Deducción 2 -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Deducción 2</label>
          <input
            title="Deducción 2"
            type="number"
            name="deduction_2"
            [(ngModel)]="payroll.deduction_2"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        <!-- Deducción 3 -->
        <div class="mb-6">
          <label class="block text-gray-300 mb-2">Deducción 3</label>
          <input
            title="Deducción 3"
            type="number"
            name="deduction_3"
            [(ngModel)]="payroll.deduction_3"
            (change)="updateTotal()"
            class="w-full px-4 py-3 rounded bg-[#181C1F] border border-[#23272A] text-white focus:outline-none focus:ring-2 focus:ring-green-400"
          />
        </div>
        </div>
      <!-- Total y Botón Guardar -->
      <div class="flex items-center justify-between mb-2">
        <div class="flex-1">
          <label class="block text-gray-300 font-bold text-lg">Total</label>
          <input
            title="Total"
            type="text"
            [value]="payroll.total || 0"
            readonly
            class="w-full max-w-xs px-1 py-1 rounded bg-[#181C1F] border-1 border-green-400 text-green-300 text-xl font-bold opacity-90 cursor-not-allowed"
          />
        </div>
        <button
          type="submit"
          [disabled]="payrollForm.invalid"
          class="mx-2 w-auto px-8 py-2 bg-green-400 text-black text-base font-medium rounded hover:bg-green-500 transition-colors"
        >
          Guardar Nómina
        </button>
      </div>
    </form>
  </div>
</div>
