<div
  class="min-h-screen flex items-center justify-center bg-gradient-to-br from-[#181C1F] to-[#23272A]"
>
  <div
    class="flex flex-col md:flex-row w-full max-w-6xl rounded-3xl overflow-hidden shadow-2xl bg-[#23272A]"
  >
    <!-- Formulario -->
    <div
      class="md:w-1/2 w-full bg-[#181C1F] flex flex-col justify-center items-center p-10"
    >
      <form
        (ngSubmit)="editing ? updatePayroll() : addPayroll()"
        class="w-full max-w-md space-y-5"
        autocomplete="off"
      >
        <h2
          class="text-3xl font-bold text-white mb-8 text-center tracking-tight"
        >
          {{ editing ? "Editar Nómina" : "Agregar Nómina" }}
        </h2>
        <div>
          <input
            placeholder="DNI Usuario"
            class="w-full px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.user_dni"
            name="user_dni"
            required
          />
        </div>
        <div>
          <input
            placeholder="Salario Base"
            type="number"
            class="w-full px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.base_salary"
            name="base_salary"
            required
            (input)="updateTotal()"
          />
        </div>
        <div>
          <input
            placeholder="Fecha"
            type="date"
            class="w-full px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white focus:outline-none transition"
            [(ngModel)]="payroll.date"
            name="date"
          />
        </div>
        <div class="grid grid-cols-2 gap-3">
          <input
            placeholder="Bono 1"
            type="number"
            class="px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.bonus_1"
            name="bonus_1"
            (input)="updateTotal()"
          />
          <input
            placeholder="Bono 2"
            type="number"
            class="px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.bonus_2"
            name="bonus_2"
            (input)="updateTotal()"
          />
          <input
            placeholder="Bono 3"
            type="number"
            class="px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.bonus_3"
            name="bonus_3"
            (input)="updateTotal()"
          />
          <input
            placeholder="Seguridad Social"
            type="number"
            class="px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.social_security"
            name="social_security"
            (input)="updateTotal()"
          />
          <input
            placeholder="IRPF"
            type="number"
            class="px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.irpf"
            name="irpf"
            (input)="updateTotal()"
          />
          <input
            placeholder="Anticipo"
            type="number"
            class="px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.advance"
            name="advance"
            (input)="updateTotal()"
          />
          <input
            placeholder="Deducción 1"
            type="number"
            class="px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.deduction_1"
            name="deduction1"
            (input)="updateTotal()"
          />
          <input
            placeholder="Deducción 2"
            type="number"
            class="px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.deduction_2"
            name="deduction2"
            (input)="updateTotal()"
          />
          <input
            placeholder="Deducción 3"
            type="number"
            class="px-4 py-3 rounded-xl bg-[#23272A] border border-transparent focus:border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.deduction_3"
            name="deduction3"
            (input)="updateTotal()"
          />
        </div>
        <div>
          <input
            placeholder="Total (automático)"
            type="number"
            class="w-full px-4 py-3 rounded-xl bg-[#23272A] border border-green-400 text-white placeholder-gray-400 focus:outline-none transition"
            [(ngModel)]="payroll.total"
            name="total"
            readonly
            tabindex="-1"
          />
        </div>
        <div class="flex gap-2 pt-2">
          <button
            type="submit"
            class="w-full py-3 bg-green-400 text-black text-lg font-semibold rounded-xl hover:bg-green-500 transition-colors"
          >
            {{ editing ? "Actualizar" : "Agregar" }}
          </button>
          <button
            *ngIf="editing"
            type="button"
            (click)="cancelEdit()"
            class="w-full py-3 bg-gray-400 text-white text-lg font-semibold rounded-xl hover:bg-gray-500 transition-colors"
          >
            Cancelar
          </button>
        </div>
      </form>
    </div>
    <!-- Tabla -->
    <div
      class="md:w-1/2 w-full bg-[#111416] flex flex-col justify-center items-center p-10"
    >
      <h2 class="text-2xl font-bold text-white mb-6 text-center">
        Lista de Nóminas
      </h2>
      <div class="overflow-x-auto w-full">
        <table
          class="min-w-full bg-[#181C1F] rounded-xl shadow text-white text-sm"
        >
          <thead>
            <tr class="border-b border-[#23272A]">
              <th class="px-2 py-2">ID</th>
              <th class="px-2 py-2">DNI</th>
              <th class="px-2 py-2">Base</th>
              <th class="px-2 py-2">Fecha</th>
              <th class="px-2 py-2">B1</th>
              <th class="px-2 py-2">B2</th>
              <th class="px-2 py-2">B3</th>
              <th class="px-2 py-2">SS</th>
              <th class="px-2 py-2">IRPF</th>
              <th class="px-2 py-2">Ant.</th>
              <th class="px-2 py-2">D1</th>
              <th class="px-2 py-2">D2</th>
              <th class="px-2 py-2">D3</th>
              <th class="px-2 py-2">Total</th>
              <th class="px-2 py-2">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let p of payrolls"
              class="hover:bg-[#23272A] transition"
            >
              <td class="px-2 py-2">{{ p.id }}</td>
              <td class="px-2 py-2">{{ p.user_dni }}</td>
              <td class="px-2 py-2">{{ p.base_salary }}</td>
              <td class="px-2 py-2">{{ p.date | date : "yyyy-MM-dd" }}</td>
              <td class="px-2 py-2">{{ p.bonus_1 }}</td>
              <td class="px-2 py-2">{{ p.bonus_2 }}</td>
              <td class="px-2 py-2">{{ p.bonus_3 }}</td>
              <td class="px-2 py-2">{{ p.social_security }}</td>
              <td class="px-2 py-2">{{ p.irpf }}</td>
              <td class="px-2 py-2">{{ p.advance }}</td>
              <td class="px-2 py-2">{{ p.deduction_1 }}</td>
              <td class="px-2 py-2">{{ p.deduction_2 }}</td>
              <td class="px-2 py-2">{{ p.deduction_3 }}</td>
              <td class="px-2 py-2 font-bold">{{ p.total }}</td>
              <td class="px-2 py-2 flex gap-2">
                <button
                  (click)="editPayroll(p)"
                  class="bg-yellow-400 text-black px-2 py-1 rounded-xl hover:bg-yellow-500 transition"
                >
                  Editar
                </button>
                <button
                  (click)="deletePayroll(p.id!)"
                  class="bg-red-600 text-white px-2 py-1 rounded-xl hover:bg-red-700 transition"
                >
                  Eliminar
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
